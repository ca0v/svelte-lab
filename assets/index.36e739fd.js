(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function P(){}const lt=t=>t;function kt(t){return t()}function dt(){return Object.create(null)}function B(t){t.forEach(kt)}function V(t){return typeof t=="function"}function ct(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let R;function N(t,e){return R||(R=document.createElement("a")),R.href=e,t===R.href}function Mt(t){return Object.keys(t).length===0}function W(t){return t==null?"":t}const St=typeof window<"u";let Pt=St?()=>window.performance.now():()=>Date.now(),at=St?t=>requestAnimationFrame(t):P;const C=new Set;function jt(t){C.forEach(e=>{e.c(t)||(C.delete(e),e.f())}),C.size!==0&&at(jt)}function xt(t){let e;return C.size===0&&at(jt),{promise:new Promise(n=>{C.add(e={c:t,f:n})}),abort(){C.delete(e)}}}function A(t,e){t.appendChild(e)}function Et(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Ut(t){const e=k("style");return Tt(Et(t),e),e.sheet}function Tt(t,e){return A(t.head||t,e),e.sheet}function L(t,e,n){t.insertBefore(e,n||null)}function j(t){t.parentNode&&t.parentNode.removeChild(t)}function F(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function E(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function It(t){return document.createTextNode(t)}function T(){return It(" ")}function gt(){return It("")}function Dt(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Jt(t){return Array.from(t.childNodes)}function mt(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function O(t,e,n){t.classList[n?"add":"remove"](e)}function Bt(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}const Z=new Map;let G=0;function Rt(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Xt(t,e){const n={stylesheet:Ut(e),rules:{}};return Z.set(t,n),n}function Lt(t,e,n,r,i,o,l,h=0){const y=16.666/r;let u=`{
`;for(let $=0;$<=1;$+=y){const w=e+(n-e)*o($);u+=$*100+`%{${l(w,1-w)}}
`}const g=u+`100% {${l(n,1-n)}}
}`,f=`__svelte_${Rt(g)}_${h}`,m=Et(t),{stylesheet:d,rules:a}=Z.get(m)||Xt(m,t);a[f]||(a[f]=!0,d.insertRule(`@keyframes ${f} ${g}`,d.cssRules.length));const b=t.style.animation||"";return t.style.animation=`${b?`${b}, `:""}${f} ${r}ms linear ${i}ms 1 both`,G+=1,f}function nt(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=n.length-r.length;i&&(t.style.animation=r.join(", "),G-=i,G||Ht())}function Ht(){at(()=>{G||(Z.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&j(e)}),Z.clear())})}let ut;function D(t){ut=t}const U=[],_t=[],z=[],pt=[],Ft=Promise.resolve();let rt=!1;function zt(){rt||(rt=!0,Ft.then(Nt))}function I(t){z.push(t)}const et=new Set;let X=0;function Nt(){const t=ut;do{for(;X<U.length;){const e=U[X];X++,D(e),Kt(e.$$)}for(D(null),U.length=0,X=0;_t.length;)_t.pop()();for(let e=0;e<z.length;e+=1){const n=z[e];et.has(n)||(et.add(n),n())}z.length=0}while(U.length);for(;pt.length;)pt.pop()();rt=!1,et.clear(),D(t)}function Kt(t){if(t.fragment!==null){t.update(),B(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(I)}}let M;function Ot(){return M||(M=Promise.resolve(),M.then(()=>{M=null})),M}function Q(t,e,n){t.dispatchEvent(Bt(`${e?"intro":"outro"}${n}`))}const K=new Set;let Ct;function it(t,e){t&&t.i&&(K.delete(t),t.i(e))}function yt(t,e,n,r){if(t&&t.o){if(K.has(t))return;K.add(t),Ct.c.push(()=>{K.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}const qt={duration:0};function $t(t,e,n){const r={direction:"in"};let i=e(t,n,r),o=!1,l,h,y=0;function u(){l&&nt(t,l)}function g(){const{delay:m=0,duration:d=300,easing:a=lt,tick:b=P,css:$}=i||qt;$&&(l=Lt(t,0,1,d,m,a,$,y++)),b(0,1);const w=Pt()+m,v=w+d;h&&h.abort(),o=!0,I(()=>Q(t,!0,"start")),h=xt(s=>{if(o){if(s>=v)return b(1,0),Q(t,!0,"end"),u(),o=!1;if(s>=w){const p=a((s-w)/d);b(p,1-p)}}return o})}let f=!1;return{start(){f||(f=!0,nt(t),V(i)?(i=i(r),Ot().then(g)):g())},invalidate(){f=!1},end(){o&&(u(),o=!1)}}}function vt(t,e,n){const r={direction:"out"};let i=e(t,n,r),o=!0,l;const h=Ct;h.r+=1;function y(){const{delay:u=0,duration:g=300,easing:f=lt,tick:m=P,css:d}=i||qt;d&&(l=Lt(t,1,0,g,u,f,d));const a=Pt()+u,b=a+g;I(()=>Q(t,!1,"start")),xt($=>{if(o){if($>=b)return m(0,1),Q(t,!1,"end"),--h.r||B(h.c),!1;if($>=a){const w=f(($-a)/g);m(1-w,w)}}return o})}return V(i)?Ot().then(()=>{i=i(r),y()}):y(),{end(u){u&&i.tick&&i.tick(1,0),o&&(l&&nt(t,l),o=!1)}}}function bt(t){t&&t.c()}function st(t,e,n,r){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),r||I(()=>{const l=t.$$.on_mount.map(kt).filter(V);t.$$.on_destroy?t.$$.on_destroy.push(...l):B(l),t.$$.on_mount=[]}),o.forEach(I)}function ot(t,e){const n=t.$$;n.fragment!==null&&(B(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Zt(t,e){t.$$.dirty[0]===-1&&(U.push(t),zt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ft(t,e,n,r,i,o,l,h=[-1]){const y=ut;D(t);const u=t.$$={fragment:null,ctx:[],props:o,update:P,not_equal:i,bound:dt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(y?y.$$.context:[])),callbacks:dt(),dirty:h,skip_bound:!1,root:e.target||y.$$.root};l&&l(u.root);let g=!1;if(u.ctx=n?n(t,e.props||{},(f,m,...d)=>{const a=d.length?d[0]:m;return u.ctx&&i(u.ctx[f],u.ctx[f]=a)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](a),g&&Zt(t,f)),m}):[],u.update(),g=!0,B(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=Jt(e.target);u.fragment&&u.fragment.l(f),f.forEach(j)}else u.fragment&&u.fragment.c();e.intro&&it(t.$$.fragment),st(t,e.target,e.anchor,e.customElement),Nt()}D(y)}class ht{$destroy(){ot(this,1),this.$destroy=P}$on(e,n){if(!V(n))return P;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Mt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function H(t,{delay:e=0,duration:n=400,easing:r=lt}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:o=>`opacity: ${o*i}`}}function Gt(t){let e,n,r,i,o,l,h,y,u,g,f;return{c(){e=k("div"),n=k("img"),l=T(),h=k("img"),N(n.src,r=t[1])||c(n,"src",r),c(n,"alt","photo album"),c(n,"class","svelte-1evrsqm"),N(h.src,y=t[2])||c(h,"src",y),c(h,"alt","photo album"),c(h,"class","svelte-1evrsqm"),O(h,"fadeOut",!t[3]),O(h,"fadeIn",t[3]),c(e,"class","frame svelte-1evrsqm"),mt(e,"--interval",`${t[0]}ms`)},m(m,d){L(m,e,d),A(e,n),A(e,l),A(e,h),f=!0},p(m,[d]){(!f||d&2&&!N(n.src,r=m[1]))&&c(n,"src",r),(!f||d&4&&!N(h.src,y=m[2]))&&c(h,"src",y),(!f||d&8)&&O(h,"fadeOut",!m[3]),(!f||d&8)&&O(h,"fadeIn",m[3]),(!f||d&1)&&mt(e,"--interval",`${m[0]}ms`)},i(m){f||(I(()=>{o&&o.end(1),i=$t(n,H,{}),i.start()}),I(()=>{g&&g.end(1),u=$t(h,H,{}),u.start()}),f=!0)},o(m){i&&i.invalidate(),o=vt(n,H,{}),u&&u.invalidate(),g=vt(h,H,{}),f=!1},d(m){m&&j(e),m&&o&&o.end(),m&&g&&g.end()}}}function Qt(t,e,n){let{sources:r=[]}=e,{interval:i=1e4}=e,o=0,l="",h="",y=!1;function u(){function g(){if(!r.length){n(1,l=n(2,h=""));return}n(3,y=o%2===0);const f=r[o%r.length];o%2?n(1,l=f):n(2,h=f),o++}setInterval(g,i),g()}return t.$$set=g=>{"sources"in g&&n(4,r=g.sources),"interval"in g&&n(0,i=g.interval)},t.$$.update=()=>{t.$$.dirty&16&&r.length&&u()},[i,l,h,y,r]}class Vt extends ht{constructor(e){super(),ft(this,e,Qt,Gt,ct,{sources:4,interval:0})}}const Wt=t=>{const e=localStorage.getItem(t);return e?JSON.parse(e):null},Yt=(t,e)=>{localStorage.setItem(t,JSON.stringify(e))},te=t=>prompt(t),ee=()=>{const t=Wt("photoUrl");if(t)return t;const e=te("Please enter your photo url");return Yt("photoUrl",e),e},J=ee();function ne(t,e,n){const r=t.slice();return r[16]=e[n],r[18]=n,r}function re(t,e,n){const r=t.slice();return r[16]=e[n],r[18]=n,r}function ie(t,e,n){const r=t.slice();return r[16]=e[n],r[18]=n,r}function se(t){let e;return{c(){e=E("image"),c(e,"class",W(`i${t[18]+1}`)+" svelte-4jwj1s"),c(e,"href","http://localhost:5000/Photo/get?id=PXL_20220626_011400211.jpg"),c(e,"width","50"),c(e,"height","50"),c(e,"x","-25"),c(e,"y","-25"),c(e,"clip-path","url(#clip)"),c(e,"style",`transform: rotate(${t[18]*60}deg) translate(40px, 0) rotate(${-t[18]*60}deg)`)},m(n,r){L(n,e,r)},p:P,d(n){n&&j(e)}}}function oe(t){let e;return{c(){e=E("image"),c(e,"class",W(`i${t[18]+7}`)+" svelte-4jwj1s"),c(e,"href","http://localhost:5000/Photo/get?id=PXL_20220626_011400211.jpg"),c(e,"width","50"),c(e,"height","50"),c(e,"x","-25"),c(e,"y","-25"),c(e,"clip-path","url(#clip)"),c(e,"style",`transform: rotate(${t[18]*60}deg) translate(80px, 0) rotate(-${t[18]*60}deg) `)},m(n,r){L(n,e,r)},p:P,d(n){n&&j(e)}}}function le(t){let e;return{c(){e=E("image"),c(e,"class",W(`i${t[18]+13}`)+" svelte-4jwj1s"),c(e,"href","http://localhost:5000/Photo/get?id=PXL_20220626_011400211.jpg"),c(e,"width","50"),c(e,"height","50"),c(e,"x","-25"),c(e,"y","-25"),c(e,"clip-path","url(#clip)"),c(e,"style",`transform: rotate(${30+t[18]*60}deg) translate(69.5px, 0) rotate(-${30+t[18]*60}deg)`)},m(n,r){L(n,e,r)},p:P,d(n){n&&j(e)}}}function ce(t){let e,n,r,i,o,l,h,y,u,g,f,m,d=Array(6).fill(0),a=[];for(let s=0;s<d.length;s+=1)a[s]=se(ie(t,d,s));let b=Array(6).fill(0),$=[];for(let s=0;s<b.length;s+=1)$[s]=oe(re(t,b,s));let w=Array(6).fill(0),v=[];for(let s=0;s<w.length;s+=1)v[s]=le(ne(t,w,s));return{c(){e=k("div"),n=k("section"),r=E("svg"),i=E("clipPath"),o=E("path"),l=E("image");for(let s=0;s<a.length;s+=1)a[s].c();h=gt();for(let s=0;s<$.length;s+=1)$[s].c();y=gt();for(let s=0;s<v.length;s+=1)v[s].c();u=T(),g=k("button"),g.textContent="save",c(o,"d",ue(ae(6,21,30))),c(i,"id","clip"),c(l,"class","i0 svelte-4jwj1s"),c(l,"href","http://localhost:5000/Photo/get?id=PXL_20220626_011400211.jpg"),c(l,"width","50"),c(l,"height","50"),c(l,"x","-25"),c(l,"y","-25"),c(l,"clip-path","url(#clip)"),c(r,"viewBox","-100 -100 200 200"),c(r,"width","100%"),c(r,"height","100%"),c(r,"stroke-width","0"),c(r,"fill","#000"),c(r,"class","svelte-4jwj1s"),c(n,"class","svelte-4jwj1s"),O(n,"play",t[0]),c(e,"class",W(t[1])+" svelte-4jwj1s")},m(s,p){L(s,e,p),A(e,n),A(n,r),A(r,i),A(i,o),A(r,l);for(let _=0;_<a.length;_+=1)a[_].m(r,null);A(r,h);for(let _=0;_<$.length;_+=1)$[_].m(r,null);A(r,y);for(let _=0;_<v.length;_+=1)v[_].m(r,null);A(e,u),A(e,g),f||(m=Dt(g,"click",t[6]),f=!0)},p(s,[p]){p&1&&O(n,"play",s[0])},i:P,o:P,d(s){s&&j(e),F(a,s),F($,s),F(v,s),f=!1,m()}}}function ae(t,e=.5,n=0){const r=[];n*=Math.PI/180;for(let i=0;i<t;i++){const o=i/t*2*Math.PI+n;r.push([e*Math.cos(o),e*Math.sin(o)])}return r}function ue(t){return t.map(([e,n],r)=>r===0?`M${e},${n}`:`L${e},${n}`).join(" ")+"Z"}function fe(t,e,n){let{id:r="default"}=e,{sources:i=[]}=e,{duration:o=.1}=e;const l=`hexagon_spiral_${r}`;function h(s=20){return Array(s).fill(0).map((p,_)=>`transform: ${`translate(${s/2-_}em,-12vh)`} !important;opacity(0);`).map((p,_)=>`.${l} .play .i${_} { ${p} }`).join(`
`)}function y(s=20){return Array(s).fill(0).map((p,_)=>`transition-delay: ${_*o}ms; transition-duration: ${(5+_)*o}s; opacity:1;`).map((p,_)=>`.${l} .i${_} { ${p} }`).join(`
`)}function u(s){const p=document.createElement("style");p.id=`hexagon_spiral_${r}`,p.innerHTML=s,document.head.appendChild(p)}u(y()),u(h());let g=!0;setTimeout(()=>n(0,g=!1),1e3);function f(s){document.querySelectorAll(`.${l} image`).forEach((_,S)=>{const x=s[S%s.length];_.setAttribute("href",x)})}function m(){document.querySelectorAll(`.${l} image`).forEach((p,_)=>{p.setAttribute("tabindex","0"),p.addEventListener("keydown",S=>{let x=parseInt(p.getAttribute("x")),q=parseInt(p.getAttribute("y")),Y=parseInt(p.getAttribute("width")),tt=parseInt(p.getAttribute("height"));switch(S.key){case"ArrowUp":q-=1;break;case"ArrowDown":q+=1;break;case"ArrowLeft":x-=1;break;case"ArrowRight":x+=1;break;case"+":Y+=2,tt+=2,x-=1,q-=1;break;case"-":Y-=2,tt-=2,x+=1,q+=1;break;case"Delete":d(p.getAttribute("href"));break;default:return}p.setAttribute("x",x.toString()),p.setAttribute("y",q.toString()),p.setAttribute("width",Y.toString()),p.setAttribute("height",tt.toString()),S.stopPropagation(),S.preventDefault()})})}function d(s){w.add(s)}function a(){localStorage.setItem(`${r}.blacklist`,JSON.stringify(Array.from(w)));const s=document.querySelectorAll(`.${l} image`),p=Array.from(s).map(_=>({url:_.getAttribute("href"),x:_.getAttribute("x"),y:_.getAttribute("y"),width:_.getAttribute("width"),height:_.getAttribute("height")}));localStorage.setItem(`${r}.positions`,JSON.stringify(p))}function b(){const s=localStorage.getItem(`${r}.positions`);return s?JSON.parse(s):[]}function $(){const s=localStorage.getItem(`${r}.blacklist`)||"[]";return new Set(JSON.parse(s))}let w=$();const v=()=>a();return t.$$set=s=>{"id"in s&&n(3,r=s.id),"sources"in s&&n(4,i=s.sources),"duration"in s&&n(5,o=s.duration)},t.$$.update=()=>{if(t.$$.dirty&16){m();const s=i.filter(_=>!w.has(_));console.log({blacklist:w,sources:i,images:s}),f(s),b().forEach(_=>{const S=document.querySelector(`image[href="${_.url}"]`);S&&(S.setAttribute("x",_.x),S.setAttribute("y",_.y),S.setAttribute("width",_.width),S.setAttribute("height",_.height))})}},[g,l,a,r,i,o,v]}class he extends ht{constructor(e){super(),ft(this,e,fe,ce,ct,{id:3,sources:4,duration:5})}}function wt(t,e,n){const r=t.slice();return r[3]=e[n],r}function At(t){let e,n,r;return{c(){e=k("img"),c(e,"tabindex","0"),c(e,"class","photo svelte-am908d"),N(e.src,n=`${J}/get?id=${t[3].id}`)||c(e,"src",n),c(e,"alt",r=t[3].id)},m(i,o){L(i,e,o)},p(i,o){o&1&&!N(e.src,n=`${J}/get?id=${i[3].id}`)&&c(e,"src",n),o&1&&r!==(r=i[3].id)&&c(e,"alt",r)},d(i){i&&j(e)}}}function de(t){let e,n,r,i,o,l,h,y,u,g,f;l=new he({props:{id:"phase-1",duration:.2,sources:t[0].map(t[1])}}),u=new Vt({props:{sources:t[0].map(t[2])}});let m=t[0],d=[];for(let a=0;a<m.length;a+=1)d[a]=At(wt(t,m,a));return{c(){e=k("main"),n=k("h1"),n.textContent="Photos",r=T(),i=k("div"),o=k("div"),bt(l.$$.fragment),h=T(),y=k("div"),bt(u.$$.fragment),g=T();for(let a=0;a<d.length;a+=1)d[a].c();c(o,"class","side-by-side svelte-am908d"),c(y,"class","fit svelte-am908d"),c(i,"class","frame svelte-am908d")},m(a,b){L(a,e,b),A(e,n),A(e,r),A(e,i),A(i,o),st(l,o,null),A(i,h),A(i,y),st(u,y,null),A(i,g);for(let $=0;$<d.length;$+=1)d[$].m(i,null);f=!0},p(a,[b]){const $={};b&1&&($.sources=a[0].map(a[1])),l.$set($);const w={};if(b&1&&(w.sources=a[0].map(a[2])),u.$set(w),b&1){m=a[0];let v;for(v=0;v<m.length;v+=1){const s=wt(a,m,v);d[v]?d[v].p(s,b):(d[v]=At(s),d[v].c(),d[v].m(i,null))}for(;v<d.length;v+=1)d[v].d(1);d.length=m.length}},i(a){f||(it(l.$$.fragment,a),it(u.$$.fragment,a),f=!0)},o(a){yt(l.$$.fragment,a),yt(u.$$.fragment,a),f=!1},d(a){a&&j(e),ot(l),ot(u),F(d,a)}}}function ge(t,e,n){let r=[];return(async()=>{const l=await fetch(`${J}/list`);if(l.ok){const h=await l.json();console.log(h),n(0,r=h)}})(),[r,l=>`${J}/get?id=${l.id}`,l=>`${J}/get?id=${l.id}`]}class me extends ht{constructor(e){super(),ft(this,e,ge,de,ct,{})}}new me({target:document.getElementById("app")});
